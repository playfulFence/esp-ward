<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `SpiInstance` trait in crate `esp_ward`."><title>SpiInstance in esp_ward - Rust</title><script> if (window.location.protocol !== "file:") document.write(`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2">`)</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-e935ef01ae1c1829.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_ward" data-themes="" data-resource-suffix="" data-rustdoc-version="1.79.0-nightly (4fd4797c2 2024-04-03)" data-channel="nightly" data-search-js="search-ffac13a0df2b1870.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-e32f0c247825364d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-c97aec732c613ca4.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../esp_ward/index.html">esp_ward</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">SpiInstance</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.cs_signal">cs_signal</a></li><li><a href="#tymethod.enable_peripheral">enable_peripheral</a></li><li><a href="#tymethod.miso_signal">miso_signal</a></li><li><a href="#tymethod.mosi_signal">mosi_signal</a></li><li><a href="#tymethod.register_block">register_block</a></li><li><a href="#tymethod.sclk_signal">sclk_signal</a></li><li><a href="#tymethod.set_interrupt_handler">set_interrupt_handler</a></li><li><a href="#tymethod.spi_num">spi_num</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.busy">busy</a></li><li><a href="#method.ch_bus_freq">ch_bus_freq</a></li><li><a href="#method.clear_interrupts">clear_interrupts</a></li><li><a href="#method.configure_datalen">configure_datalen</a></li><li><a href="#method.flush">flush</a></li><li><a href="#method.init">init</a></li><li><a href="#method.init_half_duplex">init_half_duplex</a></li><li><a href="#method.init_spi_data_mode">init_spi_data_mode</a></li><li><a href="#method.interrupts">interrupts</a></li><li><a href="#method.listen">listen</a></li><li><a href="#method.read_byte">read_byte</a></li><li><a href="#method.read_bytes">read_bytes</a></li><li><a href="#method.read_bytes_from_fifo">read_bytes_from_fifo</a></li><li><a href="#method.read_bytes_half_duplex">read_bytes_half_duplex</a></li><li><a href="#method.set_data_mode">set_data_mode</a></li><li><a href="#method.setup">setup</a></li><li><a href="#method.start_operation">start_operation</a></li><li><a href="#method.transfer">transfer</a></li><li><a href="#method.unlisten">unlisten</a></li><li><a href="#method.update">update</a></li><li><a href="#method.write_byte">write_byte</a></li><li><a href="#method.write_bytes">write_bytes</a></li><li><a href="#method.write_bytes_half_duplex">write_bytes_half_duplex</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In crate esp_ward</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../esp_ward/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="index.html">esp_ward</a>::<wbr><a class="trait" href="#">SpiInstance</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait SpiInstance: Sealed {
<details class="toggle type-contents-toggle"><summary class="hideme"><span>Show 31 methods</span></summary>    // Required methods
    fn <a href="#tymethod.register_block" class="fn">register_block</a>(&amp;self) -&gt; &amp;RegisterBlock;
<span class="item-spacer"></span>    fn <a href="#tymethod.sclk_signal" class="fn">sclk_signal</a>(&amp;self) -&gt; OutputSignal;
<span class="item-spacer"></span>    fn <a href="#tymethod.mosi_signal" class="fn">mosi_signal</a>(&amp;self) -&gt; OutputSignal;
<span class="item-spacer"></span>    fn <a href="#tymethod.miso_signal" class="fn">miso_signal</a>(&amp;self) -&gt; InputSignal;
<span class="item-spacer"></span>    fn <a href="#tymethod.cs_signal" class="fn">cs_signal</a>(&amp;self) -&gt; OutputSignal;
<span class="item-spacer"></span>    fn <a href="#tymethod.enable_peripheral" class="fn">enable_peripheral</a>(&amp;self);
<span class="item-spacer"></span>    fn <a href="#tymethod.spi_num" class="fn">spi_num</a>(&amp;self) -&gt; u8;
<span class="item-spacer"></span>    fn <a href="#tymethod.set_interrupt_handler" class="fn">set_interrupt_handler</a>(&amp;mut self, handler: InterruptHandler);

    // Provided methods
    fn <a href="#method.init" class="fn">init</a>(&amp;mut self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.init_spi_data_mode" class="fn">init_spi_data_mode</a>(
        &amp;mut self,
        cmd_mode: SpiDataMode,
        address_mode: SpiDataMode,
        data_mode: SpiDataMode
    ) { ... }
<span class="item-spacer"></span>    fn <a href="#method.setup" class="fn">setup</a>(&amp;mut self, frequency: Rate&lt;u32, 1, 1&gt;, clocks: &amp;<a class="struct" href="struct.Clocks.html" title="struct esp_ward::Clocks">Clocks</a>&lt;'_&gt;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.listen" class="fn">listen</a>(&amp;mut self, interrupts: EnumSet&lt;SpiInterrupt&gt;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.unlisten" class="fn">unlisten</a>(&amp;mut self, interrupts: EnumSet&lt;SpiInterrupt&gt;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.interrupts" class="fn">interrupts</a>(&amp;mut self) -&gt; EnumSet&lt;SpiInterrupt&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.clear_interrupts" class="fn">clear_interrupts</a>(&amp;mut self, interrupts: EnumSet&lt;SpiInterrupt&gt;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.set_data_mode" class="fn">set_data_mode</a>(&amp;mut self, data_mode: <a class="enum" href="enum.SpiMode.html" title="enum esp_ward::SpiMode">SpiMode</a>) -&gt; &amp;mut Self { ... }
<span class="item-spacer"></span>    fn <a href="#method.ch_bus_freq" class="fn">ch_bus_freq</a>(&amp;mut self, frequency: Rate&lt;u32, 1, 1&gt;, clocks: &amp;<a class="struct" href="struct.Clocks.html" title="struct esp_ward::Clocks">Clocks</a>&lt;'_&gt;) { ... }
<span class="item-spacer"></span>    fn <a href="#method.read_byte" class="fn">read_byte</a>(&amp;mut self) -&gt; Result&lt;u8, <a class="enum" href="nb/enum.Error.html" title="enum esp_ward::nb::Error">Error</a>&lt;Error&gt;&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.write_byte" class="fn">write_byte</a>(&amp;mut self, word: u8) -&gt; Result&lt;(), <a class="enum" href="nb/enum.Error.html" title="enum esp_ward::nb::Error">Error</a>&lt;Error&gt;&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.write_bytes" class="fn">write_bytes</a>(&amp;mut self, words: &amp;[u8]) -&gt; Result&lt;(), Error&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.read_bytes" class="fn">read_bytes</a>(&amp;mut self, words: &amp;mut [u8]) -&gt; Result&lt;(), Error&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.read_bytes_from_fifo" class="fn">read_bytes_from_fifo</a>(&amp;mut self, words: &amp;mut [u8]) -&gt; Result&lt;(), Error&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.busy" class="fn">busy</a>(&amp;self) -&gt; bool { ... }
<span class="item-spacer"></span>    fn <a href="#method.flush" class="fn">flush</a>(&amp;mut self) -&gt; Result&lt;(), Error&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.transfer" class="fn">transfer</a>&lt;'w&gt;(&amp;mut self, words: &amp;'w mut [u8]) -&gt; Result&lt;&amp;'w [u8], Error&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.start_operation" class="fn">start_operation</a>(&amp;self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.init_half_duplex" class="fn">init_half_duplex</a>(
        &amp;mut self,
        is_write: bool,
        command_state: bool,
        address_state: bool,
        dummy_idle: bool,
        dummy_state: bool,
        no_mosi_miso: bool
    ) { ... }
<span class="item-spacer"></span>    fn <a href="#method.write_bytes_half_duplex" class="fn">write_bytes_half_duplex</a>(
        &amp;mut self,
        cmd: Command,
        address: Address,
        dummy: u8,
        buffer: &amp;[u8]
    ) -&gt; Result&lt;(), Error&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.read_bytes_half_duplex" class="fn">read_bytes_half_duplex</a>(
        &amp;mut self,
        cmd: Command,
        address: Address,
        dummy: u8,
        buffer: &amp;mut [u8]
    ) -&gt; Result&lt;(), Error&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.update" class="fn">update</a>(&amp;self) { ... }
<span class="item-spacer"></span>    fn <a href="#method.configure_datalen" class="fn">configure_datalen</a>(&amp;self, len: u32) { ... }
</details>}</code></pre><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><section id="tymethod.register_block" class="method"><h4 class="code-header">fn <a href="#tymethod.register_block" class="fn">register_block</a>(&amp;self) -&gt; &amp;RegisterBlock</h4></section><section id="tymethod.sclk_signal" class="method"><h4 class="code-header">fn <a href="#tymethod.sclk_signal" class="fn">sclk_signal</a>(&amp;self) -&gt; OutputSignal</h4></section><section id="tymethod.mosi_signal" class="method"><h4 class="code-header">fn <a href="#tymethod.mosi_signal" class="fn">mosi_signal</a>(&amp;self) -&gt; OutputSignal</h4></section><section id="tymethod.miso_signal" class="method"><h4 class="code-header">fn <a href="#tymethod.miso_signal" class="fn">miso_signal</a>(&amp;self) -&gt; InputSignal</h4></section><section id="tymethod.cs_signal" class="method"><h4 class="code-header">fn <a href="#tymethod.cs_signal" class="fn">cs_signal</a>(&amp;self) -&gt; OutputSignal</h4></section><section id="tymethod.enable_peripheral" class="method"><h4 class="code-header">fn <a href="#tymethod.enable_peripheral" class="fn">enable_peripheral</a>(&amp;self)</h4></section><section id="tymethod.spi_num" class="method"><h4 class="code-header">fn <a href="#tymethod.spi_num" class="fn">spi_num</a>(&amp;self) -&gt; u8</h4></section><details class="toggle method-toggle" open><summary><section id="tymethod.set_interrupt_handler" class="method"><h4 class="code-header">fn <a href="#tymethod.set_interrupt_handler" class="fn">set_interrupt_handler</a>(&amp;mut self, handler: InterruptHandler)</h4></section></summary><div class="docblock"><p>Set the interrupt handler</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.init" class="method"><h4 class="code-header">fn <a href="#method.init" class="fn">init</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Initialize for full-duplex 1 bit mode</p>
</div></details><section id="method.init_spi_data_mode" class="method"><h4 class="code-header">fn <a href="#method.init_spi_data_mode" class="fn">init_spi_data_mode</a>(
    &amp;mut self,
    cmd_mode: SpiDataMode,
    address_mode: SpiDataMode,
    data_mode: SpiDataMode
)</h4></section><section id="method.setup" class="method"><h4 class="code-header">fn <a href="#method.setup" class="fn">setup</a>(&amp;mut self, frequency: Rate&lt;u32, 1, 1&gt;, clocks: &amp;<a class="struct" href="struct.Clocks.html" title="struct esp_ward::Clocks">Clocks</a>&lt;'_&gt;)</h4></section><details class="toggle method-toggle" open><summary><section id="method.listen" class="method"><h4 class="code-header">fn <a href="#method.listen" class="fn">listen</a>(&amp;mut self, interrupts: EnumSet&lt;SpiInterrupt&gt;)</h4></section></summary><div class="docblock"><p>Listen for the given interrupts</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.unlisten" class="method"><h4 class="code-header">fn <a href="#method.unlisten" class="fn">unlisten</a>(&amp;mut self, interrupts: EnumSet&lt;SpiInterrupt&gt;)</h4></section></summary><div class="docblock"><p>Unlisten the given interrupts</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.interrupts" class="method"><h4 class="code-header">fn <a href="#method.interrupts" class="fn">interrupts</a>(&amp;mut self) -&gt; EnumSet&lt;SpiInterrupt&gt;</h4></section></summary><div class="docblock"><p>Gets asserted interrupts</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.clear_interrupts" class="method"><h4 class="code-header">fn <a href="#method.clear_interrupts" class="fn">clear_interrupts</a>(&amp;mut self, interrupts: EnumSet&lt;SpiInterrupt&gt;)</h4></section></summary><div class="docblock"><p>Resets asserted interrupts</p>
</div></details><section id="method.set_data_mode" class="method"><h4 class="code-header">fn <a href="#method.set_data_mode" class="fn">set_data_mode</a>(&amp;mut self, data_mode: <a class="enum" href="enum.SpiMode.html" title="enum esp_ward::SpiMode">SpiMode</a>) -&gt; &amp;mut Self</h4></section><section id="method.ch_bus_freq" class="method"><h4 class="code-header">fn <a href="#method.ch_bus_freq" class="fn">ch_bus_freq</a>(&amp;mut self, frequency: Rate&lt;u32, 1, 1&gt;, clocks: &amp;<a class="struct" href="struct.Clocks.html" title="struct esp_ward::Clocks">Clocks</a>&lt;'_&gt;)</h4></section><section id="method.read_byte" class="method"><h4 class="code-header">fn <a href="#method.read_byte" class="fn">read_byte</a>(&amp;mut self) -&gt; Result&lt;u8, <a class="enum" href="nb/enum.Error.html" title="enum esp_ward::nb::Error">Error</a>&lt;Error&gt;&gt;</h4></section><section id="method.write_byte" class="method"><h4 class="code-header">fn <a href="#method.write_byte" class="fn">write_byte</a>(&amp;mut self, word: u8) -&gt; Result&lt;(), <a class="enum" href="nb/enum.Error.html" title="enum esp_ward::nb::Error">Error</a>&lt;Error&gt;&gt;</h4></section><details class="toggle method-toggle" open><summary><section id="method.write_bytes" class="method"><h4 class="code-header">fn <a href="#method.write_bytes" class="fn">write_bytes</a>(&amp;mut self, words: &amp;[u8]) -&gt; Result&lt;(), Error&gt;</h4></section></summary><div class="docblock"><p>Write bytes to SPI.</p>
<p>Copies the content of <code>words</code> in chunks of 64 bytes into the SPI
transmission FIFO. If <code>words</code> is longer than 64 bytes, multiple
sequential transfers are performed. This function will return before
all bytes of the last chunk to transmit have been sent to the wire. If
you must ensure that the whole messages was written correctly, use
<a href="trait.SpiInstance.html#method.flush" title="method esp_hal::spi::master::Instance::flush::flush"><code>Self::flush</code></a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.read_bytes" class="method"><h4 class="code-header">fn <a href="#method.read_bytes" class="fn">read_bytes</a>(&amp;mut self, words: &amp;mut [u8]) -&gt; Result&lt;(), Error&gt;</h4></section></summary><div class="docblock"><p>Read bytes from SPI.</p>
<p>Sends out a stuffing byte for every byte to read. This function doesn’t
perform flushing. If you want to read the response to something you
have written before, consider using <a href="trait.SpiInstance.html#method.transfer" title="method esp_hal::spi::master::Instance::transfer::transfer"><code>Self::transfer</code></a> instead.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.read_bytes_from_fifo" class="method"><h4 class="code-header">fn <a href="#method.read_bytes_from_fifo" class="fn">read_bytes_from_fifo</a>(&amp;mut self, words: &amp;mut [u8]) -&gt; Result&lt;(), Error&gt;</h4></section></summary><div class="docblock"><p>Read received bytes from SPI FIFO.</p>
<p>Copies the contents of the SPI receive FIFO into <code>words</code>. This function
doesn’t perform flushing. If you want to read the response to
something you have written before, consider using <a href="trait.SpiInstance.html#method.transfer" title="method esp_hal::spi::master::Instance::transfer::transfer"><code>Self::transfer</code></a>
instead.</p>
</div></details><section id="method.busy" class="method"><h4 class="code-header">fn <a href="#method.busy" class="fn">busy</a>(&amp;self) -&gt; bool</h4></section><section id="method.flush" class="method"><h4 class="code-header">fn <a href="#method.flush" class="fn">flush</a>(&amp;mut self) -&gt; Result&lt;(), Error&gt;</h4></section><section id="method.transfer" class="method"><h4 class="code-header">fn <a href="#method.transfer" class="fn">transfer</a>&lt;'w&gt;(&amp;mut self, words: &amp;'w mut [u8]) -&gt; Result&lt;&amp;'w [u8], Error&gt;</h4></section><section id="method.start_operation" class="method"><h4 class="code-header">fn <a href="#method.start_operation" class="fn">start_operation</a>(&amp;self)</h4></section><section id="method.init_half_duplex" class="method"><h4 class="code-header">fn <a href="#method.init_half_duplex" class="fn">init_half_duplex</a>(
    &amp;mut self,
    is_write: bool,
    command_state: bool,
    address_state: bool,
    dummy_idle: bool,
    dummy_state: bool,
    no_mosi_miso: bool
)</h4></section><section id="method.write_bytes_half_duplex" class="method"><h4 class="code-header">fn <a href="#method.write_bytes_half_duplex" class="fn">write_bytes_half_duplex</a>(
    &amp;mut self,
    cmd: Command,
    address: Address,
    dummy: u8,
    buffer: &amp;[u8]
) -&gt; Result&lt;(), Error&gt;</h4></section><section id="method.read_bytes_half_duplex" class="method"><h4 class="code-header">fn <a href="#method.read_bytes_half_duplex" class="fn">read_bytes_half_duplex</a>(
    &amp;mut self,
    cmd: Command,
    address: Address,
    dummy: u8,
    buffer: &amp;mut [u8]
) -&gt; Result&lt;(), Error&gt;</h4></section><section id="method.update" class="method"><h4 class="code-header">fn <a href="#method.update" class="fn">update</a>(&amp;self)</h4></section><section id="method.configure_datalen" class="method"><h4 class="code-header">fn <a href="#method.configure_datalen" class="fn">configure_datalen</a>(&amp;self, len: u32)</h4></section></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-Instance-for-SPI2" class="impl"><a href="#impl-Instance-for-SPI2" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.SpiInstance.html" title="trait esp_ward::SpiInstance">Instance</a> for SPI2</h3></section></div><script src="../trait.impl/esp_hal/spi/master/trait.Instance.js" data-ignore-extern-crates="esp_hal" async></script></section></div></main></body></html>